// Do not edit this file; automatically generated by build.py.
'use strict';

let Blockly = require('scratch-blocks');

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(c,a-b.length)+b}},"es8","es3");Blockly.cake=new Blockly.Generator("cake");Blockly.cake.C_VARIABLE_TYPES=[["float","float"],["int","int"],["unsigned int","unsigned int"],["short","short"],["unsigned short","unsigned short"],["bool","bool"]];Blockly.cake.C_GLOBAL_VARS=[];Blockly.cake.addReservedWords(",alignas,alignof,and,and_eq,asm,auto,bitand,bitor,bool,break,case,catch,char,char16_t,char32_t,class,compl,const,constexpr,const_cast,continue,decltype,default,delete,do,double,dynamic_cast,else,enum,explicit,export,extern,false,float,for,friend,goto,if,inline,int,long,long double,long long,mutable,namespace,new,noexcept,not,not_eq,nullptr,operator,or,or_eq,private,protected,public,register,reinterpret_cast,return,short,signed,sizeof,static,static_assert,static_cast,struct,switch,template,this,thread_local,throw,true,try,typedef,typeid,typename,union,unsigned,using,virtual,void,volatile,wchar_t,while,xor,xor_eq,posix,game,api,PI,PI2,PI3,PI4,DEG2RAD,RAD2DEG,ZRMS,ZR2D,ZR3D,ALLIANCE");
Blockly.cake.ORDER_ATOMIC=0;Blockly.cake.ORDER_MEMBER=2;Blockly.cake.ORDER_FUNCTION_CALL=2;Blockly.cake.ORDER_INCREMENT=3;Blockly.cake.ORDER_DECREMENT=3;Blockly.cake.ORDER_LOGICAL_NOT=3;Blockly.cake.ORDER_BITWISE_NOT=3;Blockly.cake.ORDER_UNARY_PLUS=3;Blockly.cake.ORDER_UNARY_NEGATION=3;Blockly.cake.ORDER_UNARY_SIGN=4;Blockly.cake.ORDER_MULTIPLICATION=5;Blockly.cake.ORDER_DIVISION=5;Blockly.cake.ORDER_MODULUS=5;Blockly.cake.ORDER_ADDITION=6;Blockly.cake.ORDER_ADDITIVE=6;
Blockly.cake.ORDER_SUBTRACTION=6;Blockly.cake.ORDER_BITWISE_SHIFT=7;Blockly.cake.ORDER_RELATIONAL=8;Blockly.cake.ORDER_EQUALITY=9;Blockly.cake.ORDER_BITWISE_AND=10;Blockly.cake.ORDER_BITWISE_XOR=11;Blockly.cake.ORDER_BITWISE_OR=12;Blockly.cake.ORDER_LOGICAL_AND=13;Blockly.cake.ORDER_LOGICAL_OR=14;Blockly.cake.ORDER_CONDITIONAL=15;Blockly.cake.ORDER_ASSIGNMENT=15;Blockly.cake.ORDER_COMMA=17;Blockly.cake.ORDER_NONE=99;Blockly.cake.INFINITE_LOOP_TRAP=null;Blockly.cake.INDENT="  ";
Blockly.cake.firstLoop=!0;
Blockly.cake.init=function(a){Blockly.cake.definitions_=Object.create(null);Blockly.cake.times_=Object.create(null);Blockly.cake.functionNames_=Object.create(null);if(Blockly.Variables){Blockly.cake.variableDB_?Blockly.cake.variableDB_.reset():Blockly.cake.variableDB_=new Blockly.Names(Blockly.cake.RESERVED_WORDS_);Blockly.cake.variableDB_.setVariableMap(a.getVariableMap());var b=[];a=Blockly.Variables.allVariables(a);for(var c=0;c<a.length;c++)"global"==a[c][3]&&(b[c]=a[c][0]+a[c][1]+" "+Blockly.cake.variableDB_.getName(a[c][2],
Blockly.Variables.NAME_TYPE)+";");Blockly.cake.definitions_.variables=b.join("\n")}};
Blockly.cake.finish=function(a){a&&(a=this.prefixLines(a,Blockly.cake.INDENT));a="\n"+a;var b=["#include <stdio.h>","#include <stdlib.h>","#include <string.h>","#include <math.h>"],c=[],d=[],e=[],f;for(f in Blockly.cake.definitions_){var h=Blockly.cake.definitions_[f];f.match("include")?b.push(h):f.match("Func_declare")?c.push(h):f.match("define")?d.push(h):e.push(h)}b=b.join("\n")+"\n\n"+c.join("\n")+"\n\n"+d.join("\n");e=e.join("\n");return b.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+"int main() {\n"+
a+e.replace(/\n\n+/g,"\n\n")+"}"};Blockly.cake.finishFull=function(a){var b=[],c;for(c in Blockly.cake.definitions_)b.push(Blockly.cake.definitions_[c]);a=b.join("\n\n")+"\n\nvoid setPos(float x, float y, float z) {\n\tfloat pos[3];\n\tpos[0] = x; pos[1] = y; pos[2] = z;\n\tapi.setPositionTarget(pos);\n}\n\n"+a;-1===a.indexOf("//Begin page init\nvoid init() {\n")&&(a="void init() {}\n"+a);return a};Blockly.cake.scrubNakedValue=function(a){return a+";\n"};
Blockly.cake.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\?/g,"\\?");return a=a.replace(/\\\\n/g,"\\n")};
Blockly.cake.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=this.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=this.allNestedComments(d))&&(c+=this.prefixLines(d,"// "))}a=a.nextConnection&&a.nextConnection.targetBlock();a=this.blockToCode(a);return c+b+a};
Blockly.cake.stringToHex=function(a){return a.match(/.{1,8}/g).map(function(a){return"0x"+parseInt(a,2).toString(16).padStart(2,"0")})};Blockly.cake.charToHexArray=function(a){a=a.charCodeAt(0).toString(16).padStart(4,"0");for(var b=[],c=0;c<a.length;c+=2){var d=a.substring(c,c+2);b.push(d)}for(;8>b.length;)b.unshift("ff");return b};Blockly.cake.isVal=function(a){return-1==a.indexOf("int")&&"string"!==typeof a?a:-1==a.indexOf("int")&&"string"===typeof a?a:a.split("int ")[1]};/*

 Visual Blocks Language

 Copyright 2012 Google Inc.
 https://blockly.googlecode.com/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
Blockly.cake.colour={};Blockly.cake.colour_picker=function(a){return["'"+a.getFieldValue("COLOUR")+"'",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.colour_random=function(a){return[Blockly.cake.provideFunction_("colour_random",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.colour_rgb=function(a){var b=Blockly.cake.valueToCode(a,"RED",Blockly.cake.ORDER_COMMA)||0,c=Blockly.cake.valueToCode(a,"GREEN",Blockly.cake.ORDER_COMMA)||0;a=Blockly.cake.valueToCode(a,"BLUE",Blockly.cake.ORDER_COMMA)||0;return[Blockly.cake.provideFunction_("colour_rgb",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;",
"  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+b+", "+c+", "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.colour_blend=function(a){var b=Blockly.cake.valueToCode(a,"COLOUR1",Blockly.cake.ORDER_COMMA)||"'#000000'",c=Blockly.cake.valueToCode(a,"COLOUR2",Blockly.cake.ORDER_COMMA)||"'#000000'";a=Blockly.cake.valueToCode(a,"RATIO",Blockly.cake.ORDER_COMMA)||.5;return[Blockly.cake.provideFunction_("colour_blend",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);",
"  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;",
"}"])+"("+b+", "+c+", "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.combined_motor={};Blockly.cake.combined_motorOne_menu=function(a){return[a.getFieldValue("COMBINED_MOTORONE_MENU"),Blockly.cake.ORDER_ATOMIC]};Blockly.cake.combined_motorTwo_menu=function(a){return[a.getFieldValue("COMBINED_MOTORTWO_MENU"),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.combined_motor_starting=function(a){var b=Blockly.cake.valueToCode(a,"PORT1",Blockly.cake.ORDER_NONE);a=Blockly.cake.valueToCode(a,"PORT2",Blockly.cake.ORDER_NONE);return'combined_motor_starting("'+b+'", "'+a+'");\n'};Blockly.cake.combined_motor_direction=function(a){return'combined_motor_direction("'+a.getFieldValue("direction")+'");\n'};
Blockly.cake.combined_motor_speed=function(a){a.getFieldValue("PORT");return"combined_motor_speed("+Blockly.cake.valueToCode(a,"SPEED",Blockly.cake.ORDER_NONE)+");\n"};Blockly.cake.combined_motor_turn=function(a){var b=a.getFieldValue("SPIN"),c=Blockly.cake.valueToCode(a,"ANGLE",Blockly.cake.ORDER_NONE),d=a.getFieldValue("distance");a=a.getFieldValue("result");return'combined_motor_turn("'+b+'", '+c+", "+d+', "'+a+'");\n'};
Blockly.cake.combined_motor_line=function(a){var b=a.getFieldValue("line"),c=a.getFieldValue("distance");a=a.getFieldValue("unit");return'combined_motor_line("'+b+'", '+c+', "'+a+'");\n'};Blockly.cake.combined_motor_stop=function(a){return"combined_motor_stop();\n"};
Blockly.cake.combined_motor_move=function(a){var b=Blockly.cake.valueToCode(a,"left",Blockly.cake.ORDER_NONE),c=Blockly.cake.valueToCode(a,"right",Blockly.cake.ORDER_NONE),d=a.getFieldValue("distance");a=a.getFieldValue("result");return"combined_motor_move("+b+", "+c+", "+d+', "'+a+'");\n'};
Blockly.cake.combined_motor_movestep=function(a){var b=Blockly.cake.valueToCode(a,"left",Blockly.cake.ORDER_NONE);a=Blockly.cake.valueToCode(a,"right",Blockly.cake.ORDER_NONE);return"combined_motor_movestep("+b+", "+a+");\n"};Blockly.cake.combined_motor_movepower=function(a){var b=Blockly.cake.valueToCode(a,"power",Blockly.cake.ORDER_NONE),c=a.getFieldValue("direction");a=Blockly.cake.valueToCode(a,"ANGLE",Blockly.cake.ORDER_NONE);return"combined_motor_movepower("+b+', "'+c+'", '+a+");\n"};
Blockly.cake.combined_motor_stopping=function(a){return'combined_motor_stopping("'+a.getFieldValue("status")+'");\n'};Blockly.cake.control={};var CONTINUE_STATEMENT="goto continue\n",addContinueLabel=function(a){return-1!==a.indexOf(CONTINUE_STATEMENT)?a+cake.INDENT+"::continue::\n":a};Blockly.cake.control_wait=function(a){return"sleep("+Blockly.cake.valueToCode(a,"DURATION",Blockly.cake.ORDER_FUNCTION_CALL)+" * 1000)\n"};
Blockly.cake.control_repeat=function(a){var b=a.getField("TIMES")?String(Number(a.getFieldValue("TIMES"))):Blockly.cake.valueToCode(a,"TIMES",Blockly.cake.ORDER_NONE)||"0",c=Blockly.cake.statementToCode(a,"SUBSTACK");c=Blockly.cake.addLoopTrap(c,a.id);c=addContinueLabel(c);a=Blockly.cake.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return"for (int "+a+" = 0; "+a+" < "+b+"; "+a+"++) {\n"+c+"}\n"};
Blockly.cake.control_forever=function(a){var b="UNTIL"==a.getFieldValue("MODE"),c=Blockly.cake.valueToCode(a,"BOOL",b?Blockly.cake.ORDER_LOGICAL_NOT:Blockly.cake.ORDER_NONE)||"true",d=Blockly.cake.statementToCode(a,"SUBSTACK");d=Blockly.cake.addLoopTrap(d,a.id);b&&(c="!"+c);return"while ("+c+") {\n"+d+"}\n"};
Blockly.cake.control_if_else=function(a){var b=Blockly.cake.valueToCode(a,"CONDITION",Blockly.cake.ORDER_NONE)||"False",c=Blockly.cake.statementToCode(a,"SUBSTACK");c=Blockly.cake.addLoopTrap(c,a.id);var d=Blockly.cake.statementToCode(a,"SUBSTACK2");d=Blockly.cake.addLoopTrap(d,a.id);a="if ("+b+") {\n";a=c?a+c:a+(Blockly.cake.INDENT+"}\n");a+="else{\n";return a=d?a+d:a+(Blockly.cake.INDENT+"}\n")};
Blockly.cake.control_wait_until=function(a){var b=Blockly.cake.valueToCode(a,"CONDITION",Blockly.cake.ORDER_UNARY_POSTFIX)||"False",c=Blockly.cake.statementToCode(a,"SUBSTACK");c=Blockly.cake.addLoopTrap(c,a.id);return a="while ("+b+") {\n"+c+(Blockly.cake.INDENT+"}\n")};
Blockly.cake.control_repeat_until=function(a){var b=Blockly.cake.valueToCode(a,"CONDITION",Blockly.cake.ORDER_UNARY_POSTFIX)||"False",c=Blockly.cake.statementToCode(a,"SUBSTACK");c=Blockly.cake.addLoopTrap(c,a.id);return a="while ("+b+") {\n"+c+(Blockly.cake.INDENT+"}\n")};Blockly.cake.control_stop=function(a){return"exit()\n"};
Blockly.cake.control_doWhile=function(a){var b="UNTIL"==a.getFieldValue("MODE"),c=Blockly.cake.valueToCode(a,"BOOL",b?Blockly.cake.ORDER_LOGICAL_NOT:Blockly.cake.ORDER_NONE)||"false",d=Blockly.cake.statementToCode(a,"DO");d=Blockly.cake.addLoopTrap(d,a.id);b&&(c="!"+c);return"do {\n"+d+"} while ("+c+");\n"};
Blockly.cake.control_for=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);if("___EC_84_A0_ED_83_9D__"==b||"--Select--"==b)b="unselected";var c=Blockly.cake.valueToCode(a,"FROM",Blockly.cake.ORDER_ASSIGNMENT)||"0",d=Blockly.cake.valueToCode(a,"TO",Blockly.cake.ORDER_ASSIGNMENT)||"0",e=Blockly.cake.valueToCode(a,"BY",Blockly.cake.ORDER_ASSIGNMENT)||"1",f=Blockly.cake.statementToCode(a,"DO");f=Blockly.cake.addLoopTrap(f,a.id);a="for ("+b+" = "+c+
"; "+b+"<"+d+"; "+b;b=0<=e;e=Math.abs(parseFloat(e));return(1==e?a+(b?"++":"--"):a+((b?" += ":" -= ")+e))+(") {\n"+f+"}\n")};Blockly.cake.control_flow_statements=function(a){switch(a.getFieldValue("FLOW")){case "BREAK":return"break;\n";case "CONTINUE":return"continue;\n"}throw"Unknown flow statement.";};Blockly.cake.data={};Blockly.cake.data_variable=function(a){return["int "+Blockly.cake.variableDB_.getName(a.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.data_setvariableto=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";parseFloat(b.slice(1,-1))==b.slice(1,-1)&&(b=parseFloat(b.slice(1,-1)).toString());b=Blockly.cake.isVal(b);console.log(b);return a+" = "+b+";\n"};
Blockly.cake.data_changevariableby=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";b=Blockly.cake.isVal(b);return a+" += "+b+";\n"};Blockly.cake.data_showvariable=function(){return""};Blockly.cake.data_hidevariable=function(){return""};
Blockly.cake.data_listcontents=function(a){return["char *"+Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE)+"[] = {}",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.data_addtolist=function(a){var b=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";b=Blockly.cake.isVal(b);return"int* "+a+" = NULL;\nint size = 0;\nsize++;\n"+a+" = realloc("+a+", size * sizeof(int));\n"+a+'[size - 1] = "'+b+'";\n'};
Blockly.cake.data_deleteoflist=function(a){var b=Blockly.cake.valueToCode(a,"INDEX",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";b=Blockly.cake.isVal(b);return"int length = sizeof("+a+") / sizeof("+a+")[0];\nfor (int i = "+b+"; i < length - 1; i++){\n    "+a+"[i] = "+a+"[i + 1];\n}\nlength--;\n"+a+" = realloc("+a+", length * sizeof(int));\n"};
Blockly.cake.data_deletealloflist=function(a){a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);return"unnamed"===a?"":"free(*"+a+");\n*"+a+" = NULL;\n"};
Blockly.cake.data_insertatlist=function(a){var b=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_ADDITIVE)||"0",c=Blockly.cake.valueToCode(a,"INDEX",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";b=Blockly.cake.isVal(b);c=Blockly.cake.isVal(c);return"int n = sizeof("+a+") / sizeof("+a+")[0];\n"+a+" = (int *)malloc(n * sizeof(int));\n"+a+" = (int *)realloc("+a+", (n + 1) * sizeof(int));\nfor (int i = n; i > "+
c+"; i--){\n    "+a+"[i] = "+a+"[i - 1];\n}\n"+a+"["+c+"] = "+b+";\n"};Blockly.cake.data_replaceitemoflist=function(a){var b=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_ADDITIVE)||"0",c=Blockly.cake.valueToCode(a,"INDEX",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);if("unnamed"===a)return"";b=Blockly.cake.isVal(b);c=Blockly.cake.isVal(c);return a+"["+c+' - 1] = "'+b+'";\n'};
Blockly.cake.data_itemoflist=function(a){var b=Blockly.cake.valueToCode(a,"INDEX",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);b=Blockly.cake.isVal(b);return[a+"["+b+" - 1]",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.data_itemnumoflist=function(a){var b=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);b=Blockly.cake.isVal(b);return["getIndex(*"+a+', "'+b+'")',Blockly.cake.ORDER_UNARY_SIGN]};Blockly.cake.data_lengthoflist=function(a){a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);return["sizeof("+a+") / sizeof("+a+")[0]",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.data_listcontainsitem=function(a){var b=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_ADDITIVE)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("LIST"),Blockly.Variables.NAME_TYPE);b=Blockly.cake.isVal(b);return["contains("+a+', "'+b+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.data_showlist=function(){return""};Blockly.cake.data_hidelist=function(){return""};Blockly.cake.event={};Blockly.cake.event_whenflagclicked=function(a){return""};Blockly.cake.event_whenmicrobitbegin=function(a){Blockly.cake.imports_.microbit="from microbit import *";var b="";a.nextConnection&&a.nextConnection.targetBlock()||(b+=";\n");return b};
Blockly.cake.event_whenmicrobitbuttonpressed=function(a){Blockly.cake.imports_.microbit="from microbit import *";for(var b=a.getFieldValue("KEY_OPTION"),c="";Blockly.cake.loops_["event_whenmicrobitbegin"+b+c];)""===c?c=1:c++;Blockly.cake.loops_["event_whenmicrobitbegin"+b+c]="if button_"+b+".is_pressed() {\n"+Blockly.cake.INDENT+Blockly.cake.INDENT+"on_button_"+b+c+"()";var d="void on_button_"+b+c+"() {\n";if(a.nextConnection&&a.nextConnection.targetBlock()){var e=[],f;for(f in Blockly.cake.variables_)e.push(Blockly.cake.variables_[f].slice(0,
Blockly.cake.variables_[f].indexOf("=")-1));0!==e.length&&(d+=Blockly.cake.INDENT+"global "+e.join(", ")+"\n");d=Blockly.cake.scrub_(a,d)}else d+=Blockly.cake.INDENT+";\n}\n";Blockly.cake.libraries_["void on_button_"+b+c]=d;return null};
Blockly.cake.event_whenmicrobitpinbeingtouched=function(a){Blockly.cake.imports_.microbit="from microbit import *";for(var b=a.getFieldValue("PIN_OPTION"),c="";Blockly.cake.loops_["event_whenmicrobitpinbeingtouched"+b+c];)""===c?c=1:c++;Blockly.cake.loops_["event_whenmicrobitpinbeingtouched"+b+c]="if pin"+b+".is_pressed() {\n"+Blockly.cake.INDENT+Blockly.cake.INDENT+"on_pin"+b+c+"()";var d="void on_pin"+b+c+"() {\n";if(a.nextConnection&&a.nextConnection.targetBlock()){var e=[],f;for(f in Blockly.cake.variables_)e.push(Blockly.cake.variables_[f].slice(0,
Blockly.cake.variables_[f].indexOf("=")-1));0!==e.length&&(d+=Blockly.cake.INDENT+"global "+e.join(", ")+"\n}");d=Blockly.cake.scrub_(a,d)}else d+=Blockly.cake.INDENT+";\n}\n";Blockly.cake.libraries_["void on_pin"+b+c]=d;return null};
Blockly.cake.event_whenmicrobitgesture=function(a){Blockly.cake.imports_.microbit="from microbit import *";for(var b=a.getFieldValue("GESTURE_OPTION"),c="";Blockly.cake.loops_["event_whenmicrobitgesture"+b+c];)""===c?c=1:c++;Blockly.cake.loops_["event_whenmicrobitgesture"+b+c]="if accelerometer.was_gesture('"+b+"') {\n"+Blockly.cake.INDENT+Blockly.cake.INDENT+"on_"+b+c+"()";var d="void on_"+b+c+"() {\n";if(a.nextConnection&&a.nextConnection.targetBlock()){var e=[],f;for(f in Blockly.cake.variables_)e.push(Blockly.cake.variables_[f].slice(0,
Blockly.cake.variables_[f].indexOf("=")-1));0!==e.length&&(d+=Blockly.cake.INDENT+"global "+e.join(", ")+"\n}");d=Blockly.cake.scrub_(a,d)}else d+=Blockly.cake.INDENT+";\n}\n";Blockly.cake.libraries_["void on_"+b+c]=d;return null};Blockly.cake.event_checkcolor=function(a){var b=a.getFieldValue("PORT");return"int checkColor = "+Blockly.cake.valueToCode(a,"COLOR",Blockly.cake.ORDER_ATOMIC).replace(/#/g,"0x").replace(/'/g,"")+";\nevent_checkcolor('"+b+"', checkColor);\n"};
Blockly.cake.event_keyjudement=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("status");return"event_keyjudement('"+b+"', "+a+");\n"};Blockly.cake.event_tilts=function(a){return"event_tilts("+a.getFieldValue("direction")+");\n"};Blockly.cake.event_keypress=function(a){var b=a.getFieldValue("direction");a=a.getFieldValue("status");return"event_keypress("+b+", "+a+");\n"};
Blockly.cake.event_whengreaterthan=function(a){var b=a.getFieldValue("WHENGREATERTHANMENU");a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ATOMIC);return"event_whengreaterthan("+b+", "+a+");\n"};Blockly.cake.event_whenbroadcastreceived=function(a){return'event_whenbroadcastreceived("'+Blockly.cake.valueToCode(a,"BROADCAST_INPUT",Blockly.cake.ORDER_ATOMIC)+'");\n'};
Blockly.cake.event_broadcast=function(a){return'event_broadcast("'+Blockly.cake.valueToCode(a,"BROADCAST_INPUT",Blockly.cake.ORDER_ATOMIC)+'");\n'};Blockly.cake.event_broadcastandwait=function(a){return'event_broadcastandwait("'+Blockly.cake.valueToCode(a,"BROADCAST_INPUT",Blockly.cake.ORDER_ATOMIC)+'");\n'};Blockly.cake.event_broadcast_menu=function(a){return[Blockly.cake.variableDB_.getName(a.getFieldValue("BROADCAST_OPTION"),Blockly.Variables.NAME_TYPE),Blockly.cake.ORDER_ATOMIC]};Blockly.cake.lists={};Blockly.cake.lists_create_empty=function(a){return["[]",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.lists_create_with=function(a){for(var b=Array(a.itemCount_),c=0;c<a.itemCount_;c++)b[c]=Blockly.cake.valueToCode(a,"ADD"+c,Blockly.cake.ORDER_COMMA)||"null";b="["+b.join(", ")+"]";return[b,Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.lists_repeat=function(a){var b=Blockly.cake.provideFunction_("lists_repeat",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),c=Blockly.cake.valueToCode(a,"ITEM",Blockly.cake.ORDER_COMMA)||"null";a=Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_COMMA)||"0";return[b+"("+c+", "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.lists_length=function(a){return[(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_FUNCTION_CALL)||"[]")+".length",Blockly.cake.ORDER_MEMBER]};Blockly.cake.lists_isEmpty=function(a){return["!"+(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"[]")+".length",Blockly.cake.ORDER_LOGICAL_NOT]};
Blockly.cake.lists_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.cake.valueToCode(a,"FIND",Blockly.cake.ORDER_NONE)||"''";return[(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"[]")+"."+b+"("+c+") + 1",Blockly.cake.ORDER_MEMBER]};
Blockly.cake.lists_getIndex=function(a){var b=a.getFieldValue("MODE")||"GET",c=a.getFieldValue("WHERE")||"FROM_START",d=Blockly.cake.valueToCode(a,"AT",Blockly.cake.ORDER_UNARY_NEGATION)||"1";a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"[]";if("FIRST"==c){if("GET"==b)return[a+"[0]",Blockly.cake.ORDER_MEMBER];if("GET_REMOVE"==b)return[a+".shift()",Blockly.cake.ORDER_MEMBER];if("REMOVE"==b)return a+".shift();\n"}else if("LAST"==c){if("GET"==b)return[a+".slice(-1)[0]",Blockly.cake.ORDER_MEMBER];
if("GET_REMOVE"==b)return[a+".pop()",Blockly.cake.ORDER_MEMBER];if("REMOVE"==b)return a+".pop();\n"}else if("FROM_START"==c){d=Blockly.isNumber(d)?parseFloat(d)-1:d+" - 1";if("GET"==b)return[a+"["+d+"]",Blockly.cake.ORDER_MEMBER];if("GET_REMOVE"==b)return[a+".splice("+d+", 1)[0]",Blockly.cake.ORDER_FUNCTION_CALL];if("REMOVE"==b)return a+".splice("+d+", 1);\n"}else if("FROM_END"==c){if("GET"==b)return[a+".slice(-"+d+")[0]",Blockly.cake.ORDER_FUNCTION_CALL];if("GET_REMOVE"==b||"REMOVE"==b){c=Blockly.cake.provideFunction_("lists_remove_from_end",
["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(list, x) {","  x = list.length - x;","  return list.splice(x, 1)[0];","}"]);d=c+"("+a+", "+d+")";if("GET_REMOVE"==b)return[d,Blockly.cake.ORDER_FUNCTION_CALL];if("REMOVE"==b)return d+";\n"}}else if("RANDOM"==c){c=Blockly.cake.provideFunction_("lists_get_random_item",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {",
"    return list[x];","  }","}"]);d=c+"("+a+", "+("GET"!=b)+")";if("GET"==b||"GET_REMOVE"==b)return[d,Blockly.cake.ORDER_FUNCTION_CALL];if("REMOVE"==b)return d+";\n"}throw"Unhandled combination (lists_getIndex).";};
Blockly.cake.lists_setIndex=function(a){function b(){if(c.match(/^\w+$/))return"";var a=Blockly.cake.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE),b="var "+a+" = "+c+";\n";c=a;return b}var c=Blockly.cake.valueToCode(a,"LIST",Blockly.cake.ORDER_MEMBER)||"[]",d=a.getFieldValue("MODE")||"GET",e=a.getFieldValue("WHERE")||"FROM_START",f=Blockly.cake.valueToCode(a,"AT",Blockly.cake.ORDER_NONE)||"1";a=Blockly.cake.valueToCode(a,"TO",Blockly.cake.ORDER_ASSIGNMENT)||"null";if("FIRST"==
e){if("SET"==d)return c+"[0] = "+a+";\n";if("INSERT"==d)return c+".unshift("+a+");\n"}else if("LAST"==e){if("SET"==d)return e=b(),e+(c+"["+c+".length - 1] = "+a+";\n");if("INSERT"==d)return c+".push("+a+");\n"}else if("FROM_START"==e){f=Blockly.isNumber(f)?parseFloat(f)-1:f+" - 1";if("SET"==d)return c+"["+f+"] = "+a+";\n";if("INSERT"==d)return c+".splice("+f+", 0, "+a+");\n"}else if("FROM_END"==e){e=b();if("SET"==d)return e+(c+"["+c+".length - "+f+"] = "+a+";\n");if("INSERT"==d)return e+(c+".splice("+
c+".length - "+f+", 0, "+a+");\n")}else if("RANDOM"==e){e=b();f=Blockly.cake.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE);e+="var "+f+" = Math.floor(Math.random() * "+c+".length);\n";if("SET"==d)return e+(c+"["+f+"] = "+a+";\n");if("INSERT"==d)return e+(c+".splice("+f+", 0, "+a+");\n")}throw"Unhandled combination (lists_setIndex).";};
Blockly.cake.lists_getSublist=function(a){var b=Blockly.cake.valueToCode(a,"LIST",Blockly.cake.ORDER_MEMBER)||"[]",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=Blockly.cake.valueToCode(a,"AT1",Blockly.cake.ORDER_NONE)||"1";a=Blockly.cake.valueToCode(a,"AT2",Blockly.cake.ORDER_NONE)||"1";return["FIRST"==c&&"LAST"==d?b+".concat()":Blockly.cake.provideFunction_("lists_get_sublist",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(list, where1, at1, where2, at2) {","  function getAt(where, at) {",
"    if (where == 'FROM_START') {","      at--;","    } else if (where == 'FROM_END') {","      at = list.length - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = list.length - 1;","    } else {","      throw 'Unhandled option (lists_getSublist).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return list.slice(at1, at2);","}"])+"("+b+", '"+c+"', "+e+", '"+d+"', "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.logic={};Blockly.cake.control_if=function(a){var b=Blockly.cake.valueToCode(a,"CONDITION",Blockly.cake.ORDER_NONE)||"False",c=Blockly.cake.statementToCode(a,"SUBSTACK");c=Blockly.cake.addLoopTrap(c,a.id);a="if ("+b+") {\n";a=c?a+c:a+(Blockly.cake.INDENT+"\n");return a+"}\n"};
Blockly.cake.logic_compare=function(a){var b={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c="=="==b||"!="==b?Blockly.cake.ORDER_EQUALITY:Blockly.cake.ORDER_RELATIONAL,d=Blockly.cake.valueToCode(a,"A",c)||"0";a=Blockly.cake.valueToCode(a,"B",c)||"0";return[d+" "+b+" "+a,c]};
Blockly.cake.logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"&&":"||",c="&&"==b?Blockly.cake.ORDER_LOGICAL_AND:Blockly.cake.ORDER_LOGICAL_OR,d=Blockly.cake.valueToCode(a,"A",c);a=Blockly.cake.valueToCode(a,"B",c);if(d||a){var e="&&"==b?"1":"0";d||(d=e);a||(a=e)}else a=d="0";return[d+" "+b+" "+a,c]};Blockly.cake.logic_negate=function(a){var b=Blockly.cake.ORDER_LOGICAL_NOT;return["!"+(Blockly.cake.valueToCode(a,"BOOL",b)||"1"),b]};
Blockly.cake.logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"1":"0",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.logic_null=function(a){return["null",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.logic_ternary=function(a){var b=Blockly.cake.valueToCode(a,"IF",Blockly.cake.ORDER_CONDITIONAL)||"0",c=Blockly.cake.valueToCode(a,"THEN",Blockly.cake.ORDER_CONDITIONAL)||"null";a=Blockly.cake.valueToCode(a,"ELSE",Blockly.cake.ORDER_CONDITIONAL)||"null";return[b+" ? "+c+" : "+a,Blockly.cake.ORDER_CONDITIONAL]};
Blockly.cake.control_switch=function(a){var b=0,c=Blockly.cake.valueToCode(a,"SWITCH",Blockly.cake.ORDER_NONE)||"0",d=Blockly.cake.valueToCode(a,"CASE"+b,Blockly.cake.ORDER_NONE)||b,e=Blockly.cake.statementToCode(a,"DO"+b);b=Blockly.cake.statementToCode(a,"DEFAULT");c="switch ("+c+") {\ndefault :\n"+b+"\ncase "+d+" : \n"+e;for(b=1;b<=a.caseCount_;b++)d=Blockly.cake.valueToCode(a,"CASE"+b,Blockly.cake.ORDER_NONE)||b,e=Blockly.cake.statementToCode(a,"DO"+b),c+="\ncase "+d+" : \n"+e;return c+"\n"};
Blockly.cake.control_switch_break=function(a){return"break;\n"};Blockly.cake.math={};Blockly.cake.math_number=function(a){return[parseFloat(a.getFieldValue("NUM")),Blockly.cake.ORDER_ATOMIC]};Blockly.cake.math_arithmetic=function(a){var b={ADD:[" + ",Blockly.cake.ORDER_ADDITION],MINUS:[" - ",Blockly.cake.ORDER_SUBTRACTION],MULTIPLY:[" * ",Blockly.cake.ORDER_MULTIPLICATION],DIVIDE:[" / ",Blockly.cake.ORDER_DIVISION]}[a.getFieldValue("OP")],c=b[0];b=b[1];var d=Blockly.cake.valueToCode(a,"A",b)||"0";a=Blockly.cake.valueToCode(a,"B",b)||"0";return["("+d+c+a+")",b]};
Blockly.cake.math_modulo=function(a){var b=Blockly.cake.valueToCode(a,"DIVIDEND",Blockly.cake.ORDER_MODULUS)||"0";a=Blockly.cake.valueToCode(a,"DIVISOR",Blockly.cake.ORDER_MODULUS)||"0";return[b+" % "+a,Blockly.cake.ORDER_MODULUS]};Blockly.cake.library_math_abs=function(a){a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_math="#include <math.h>";return["abs("+a+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_trig=function(a){var b=a.getFieldValue("OP");a=Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_NONE)||"0";switch(b){case "SIN":b="sin("+a+")";break;case "COS":b="cos("+a+")";break;case "TAN":b="tan("+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_math="#include <math.h>";return[b,Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_logs=function(a){var b=a.getFieldValue("OP");a=Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_NONE)||"0";switch(b){case "LOG":b="log("+a+")";break;case "LOG10":b="log10("+a+")";break;case "LOG2":b="log2("+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_math="#include <math.h>";return[b,Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_pow=function(a){var b=Blockly.cake.valueToCode(a,"BASE",Blockly.cake.ORDER_NONE)||"''";a=Blockly.cake.valueToCode(a,"EXPO",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_math="#include <math.h>";return["pow("+b+","+a+")",Blockly.cake.ORDER_NONE]};Blockly.cake.library_math_exp=function(a){a=Blockly.cake.valueToCode(a,"EXPO",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_math="#include <math.h>";return["exp("+a+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_sqrt=function(a){a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_math="#include <math.h>";return["sqrt("+a+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_round=function(a){var b=a.getFieldValue("OP");a=Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_NONE)||"''";switch(b){case "ROUND":b="round("+a+")";break;case "CEIL":b="ceil("+a+")";break;case "FLOOR":b="floor("+a+")";break;case "TRUNC":b="trunc("+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_math="#include <math.h>";return[b,Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_numcheck=function(a){var b=a.getFieldValue("CONDITIONS");a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";switch(b){case "ISFINITE":b="isfinite("+a+")";break;case "ISINF":b="isinf("+a+")";break;case "SIGNBIT":b="signbit("+a+")";break;case "ISNAN":b="isnan("+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_math="#include <math.h>";return[b,Blockly.cake.ORDER_NONE]};
Blockly.cake.library_math_numcompare=function(a){var b=a.getFieldValue("CONDITIONS"),c=Blockly.cake.valueToCode(a,"VAR1",Blockly.cake.ORDER_NONE)||"''";a=Blockly.cake.valueToCode(a,"VAR2",Blockly.cake.ORDER_NONE)||"''";switch(b){case "ISGREATER":b="isgreater("+c+","+a+")";break;case "ISLESS":b="isless("+c+","+a+")";break;case "ISGREQ":b="isgreaterequal("+c+","+a+")";break;case "ISLEEQ":b="islessequal("+c+","+a+")";break;case "ISLEGR":b="islessgreater("+c+","+a+")";break;case "ISUNORDER":b="isunordered("+
c+","+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_math="#include <math.h>";return[b,Blockly.cake.ORDER_NONE]};Blockly.cake.math_integer=Blockly.cake.math_number;Blockly.cake.math_whole_number=Blockly.cake.math_number;Blockly.cake.math_positive_number=Blockly.cake.math_number;Blockly.cake.math_angle=Blockly.cake.math_number;Blockly.cake.math_int8_number=Blockly.cake.math_number;Blockly.cake.math_uint8_number=Blockly.cake.math_number;
Blockly.cake.math_int9_number=Blockly.cake.math_number;Blockly.cake.math_uint10_number=Blockly.cake.math_number;Blockly.cake.math_int11_number=Blockly.cake.math_number;Blockly.cake.math_0to100_number=Blockly.cake.math_number;Blockly.cake["math_-100to100_number"]=Blockly.cake.math_number;Blockly.cake.math_half_angle=Blockly.cake.math_number;Blockly.cake.matrix={};Blockly.cake.matrix=function(a){a=a.getFieldValue("MATRIX");isNaN(a)&&(a=0);return[a,Blockly.cake.ORDER_ATOMIC]};Blockly.cake.matrix_lamp=function(a){var b=a.getFieldValue("lamp");a=Blockly.cake.valueToCode(a,"COLOR",Blockly.cake.ORDER_ATOMIC);b=Blockly.cake.stringToHex(b);a=a.replace(/#/g,"0x");return"uint8_t BMP[] = {"+b+"};\nmatrix_lamp(NULL, BMP, "+a.replace(/'/g,"")+");\n"};Blockly.cake.matrix_lamp_stop=function(a){return"matrix_stop_lamp(NULL);\n"};
Blockly.cake.matrix_lamp_set=function(a){return"matrix_set_lamp(NULL, "+Blockly.cake.valueToCode(a,"brightness",Blockly.cake.ORDER_NONE)+");\n"};Blockly.cake.matrix_lamp_single=function(a){var b=a.getFieldValue("x"),c=a.getFieldValue("y");a=Blockly.cake.valueToCode(a,"brightness",Blockly.cake.ORDER_NONE);return"matrix_single_lamp("+b+", "+c+", "+a+");\n"};
Blockly.cake.matrix_lamp_text=function(a){a=a.getFieldValue("text");return"char Text[] = {"+Blockly.cake.charToHexArray(a).map(function(a){return"0x"+a}).join(",")+'};\nmatrix_text_lamp(Text, getTaskNumber(Text)/8 ,"left");\n'};Blockly.cake.matrix_lamp_setRGB=function(a){var b=a.getFieldValue("order");a=Blockly.cake.valueToCode(a,"COLOR",Blockly.cake.ORDER_ATOMIC);return"matrix_setRGB_lamp("+b+", "+a.replace(/'/g,'"')+");\n"};
Blockly.cake.matrix_lamp_useRGB=function(a){return'matrix_useRGB_lamp("'+a.getFieldValue("SWITCH")+'");\n'};Blockly.cake.microbit={};Blockly.cake.microbit_pin_setDigitalOutput=function(a){var b=a.getFieldValue("PIN");a=Blockly.cake.valueToCode(a,"LEVEL",Blockly.cake.ORDER_FUNCTION_CALL)||"LOW";return"pin"+b+".write_digital("+a+")\n"};Blockly.cake.microbit_pin_menu_level=function(a){return[a.getFieldValue("level")||"0",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_pin_setPwmOutput=function(a){var b=a.getFieldValue("PIN");a=Blockly.cake.valueToCode(a,"OUT",Blockly.cake.ORDER_FUNCTION_CALL)||"0";return"pin"+b+".write_analog("+a+")\n"};Blockly.cake.microbit_pin_readDigitalPin=function(a){return["pin"+(a.getFieldValue("PIN")||"0")+".read_digital()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_pin_readAnalogPin=function(a){return["pin"+(a.getFieldValue("PIN")||"0")+".read_analog()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_pin_pinTouched=function(a){return["pin"+(a.getFieldValue("PIN")||"0")+".is_touched()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_display_showImage=function(a){a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ATOMIC)||"0";a=a.replace(/1/g,"9");a=a.slice(0,5)+":"+a.slice(5,10)+":"+a.slice(10,15)+":"+a.slice(15,20)+":"+a.slice(20,25);return"display.show(Image('"+a+"'))\n"};
Blockly.cake.microbit_display_showImageUntil=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ATOMIC)||"0";a=Blockly.cake.valueToCode(a,"TIME",Blockly.cake.ORDER_ATOMIC)||"0";b=b.replace(/1/g,"9");b=b.slice(0,5)+":"+b.slice(5,10)+":"+b.slice(10,15)+":"+b.slice(15,20)+":"+b.slice(20,25);return"display.show(Image('"+b+"'))\nsleep(float("+a+") * 1000)\ndisplay.clear()\n"};
Blockly.cake.microbit_display_show=function(a){return"display.scroll(str("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_FUNCTION_CALL)||"")+"), wait=False, loop=False)\n"};Blockly.cake.microbit_display_showUntilScrollDone=function(a){return"display.scroll(str("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_FUNCTION_CALL)||"")+"), wait=True, loop=False)\n"};Blockly.cake.microbit_display_clearDisplay=function(){return"display.clear()\n"};
Blockly.cake.microbit_display_lightPixelAt=function(a){var b=a.getFieldValue("STATE"),c=Blockly.cake.valueToCode(a,"X",Blockly.cake.ORDER_FUNCTION_CALL)||"";a=Blockly.cake.valueToCode(a,"Y",Blockly.cake.ORDER_FUNCTION_CALL)||"";return"display.set_pixel(int("+c+"), int("+a+"), "+("off"===b?0:9)+")\n"};
Blockly.cake.microbit_display_showOnPiexlbrightness=function(a){var b=Blockly.cake.valueToCode(a,"BRT",Blockly.cake.ORDER_FUNCTION_CALL)||"9",c=Blockly.cake.valueToCode(a,"X",Blockly.cake.ORDER_FUNCTION_CALL)||"";a=Blockly.cake.valueToCode(a,"Y",Blockly.cake.ORDER_FUNCTION_CALL)||"";return"display.set_pixel(int("+c+"), int("+a+"), "+b+")\n"};Blockly.cake.microbit_display_menu_ledBrightness=function(a){return[a.getFieldValue("ledBrightness")||"9",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_sensor_buttonIsPressed=function(a){return["button_"+a.getFieldValue("KEY")+".is_pressed()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_gestureIsX=function(a){return["accelerometer.is_gesture('"+a.getFieldValue("STA")+"')",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_axisAcceleration=function(a){return["accelerometer.get_"+a.getFieldValue("AXIS")+"()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_sensor_compassAngle=function(){return["compass.heading()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_compassMagneticDensity=function(){return["compass.get_field_strength()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_calibrateCompass=function(){return["compass.calibrate()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_lightLevel=function(){return["display.read_light_level()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_sensor_temperature=function(){return["temperature()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_sensor_runningTime=function(){return["running_time()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.microbit_wireless_openWirelessCommunication=function(){Blockly.cake.imports_.radio="import radio";return"radio.on()\n"};Blockly.cake.microbit_wireless_closeWirelessCommunication=function(){Blockly.cake.imports_.radio="import radio";return"radio.off()\n"};
Blockly.cake.microbit_wireless_resetWirelessCommunication=function(){Blockly.cake.imports_.radio="import radio";return"radio.reset()\n"};Blockly.cake.microbit_wireless_sendWirelessMessage=function(a){Blockly.cake.imports_.radio="import radio";return"radio.send(str("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_FUNCTION_CALL)||"")+"))\n"};Blockly.cake.microbit_wireless_receiveWirelessMessage=function(){Blockly.cake.imports_.radio="import radio";return["radio.receive()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.microbit_wireless_setWirelessCommunicationChannel=function(a){Blockly.cake.imports_.radio="import radio";return"radio.config(channel = "+a.getFieldValue("CH")+")\n"};Blockly.cake.microbit_console_consolePrint=function(a){return"print("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_FUNCTION_CALL)||"")+")\n"};Blockly.cake.motion={};Blockly.cake.motion_movesteps=function(a){return"movesteps("+Blockly.cake.valueToCode(a,"STEPS",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_turnright=function(a){return"turnright("+Blockly.cake.valueToCode(a,"DEGREES",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_turnleft=function(a){return"turnleft("+Blockly.cake.valueToCode(a,"DEGREES",Blockly.cake.ORDER_NONE)+")\n"};
Blockly.cake.motion_pointindirection=function(a){return"pointindirection("+Blockly.cake.valueToCode(a,"DIRECTION",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_gotoxy=function(a){var b=Blockly.cake.valueToCode(a,"X",Blockly.cake.ORDER_NONE);a=Blockly.cake.valueToCode(a,"Y",Blockly.cake.ORDER_NONE);return"gotoxy("+b+","+a+")\n"};
Blockly.cake.motion_glideto=function(a){var b=Blockly.cake.valueToCode(a,"SECS",Blockly.cake.ORDER_NONE);a=Blockly.cake.valueToCode(a,"TO",Blockly.cake.ORDER_NONE);return"glideto("+b+","+a+")\n"};Blockly.cake.motion_glidesecstoxy=function(a){var b=Blockly.cake.valueToCode(a,"SECS",Blockly.cake.ORDER_NONE),c=Blockly.cake.valueToCode(a,"X",Blockly.cake.ORDER_NONE);a=Blockly.cake.valueToCode(a,"Y",Blockly.cake.ORDER_NONE);return"glidesecstoxy("+b+","+c+","+a+")\n"};
Blockly.cake.motion_changexby=function(a){return"changexby("+Blockly.cake.valueToCode(a,"DX",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_setx=function(a){return"setx("+Blockly.cake.valueToCode(a,"X",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_changeyby=function(a){return"changeyby("+Blockly.cake.valueToCode(a,"DY",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motion_sety=function(a){return"sety("+Blockly.cake.valueToCode(a,"Y",Blockly.cake.ORDER_NONE)+")\n"};
Blockly.cake.motion_ifonedgebounce=function(a){return"ifonedgebounce()\n"};Blockly.cake.motion_setrotationstyle=function(a){return"setrotationstyle("+Blockly.cake.valueToCode(a,"STYLE",Blockly.cake.ORDER_NONE)+")\n"};Blockly.cake.motor={};Blockly.cake.motor_starting=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("SPIN");return"Motor_Starting('"+b+"', \""+a+'");\n'};Blockly.cake.motor_stop=function(a){return"Motor_Stop('"+a.getFieldValue("PORT")+"');\n"};Blockly.cake.motor_speed=function(a){var b=a.getFieldValue("PORT");a=Blockly.cake.valueToCode(a,"SPEED",Blockly.cake.ORDER_NONE);return"Motor_Speed('"+b+"', \""+a+'");\n'};
Blockly.cake.motor_specifiedunit=function(a){var b=a.getFieldValue("PORT"),c=a.getFieldValue("SPIN"),d=a.getFieldValue("count");a=a.getFieldValue("unit");return"Motor_specifiedunit('"+b+"', \""+c+'", "'+d+'", "'+a+'");\n'};Blockly.cake.motor_specifiedangle=function(a){var b=a.getFieldValue("PORT"),c=a.getFieldValue("SPIN");a=Blockly.cake.valueToCode(a,"ANGLE",Blockly.cake.ORDER_NONE);return"Motor_Specifiedangle('"+b+"', \""+c+'", "'+a+'");\n'};
Blockly.cake.motor_relative_position=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("position");return"Motor_Relative_Position('"+b+"', \""+a+'");\n'};Blockly.cake.motor_specified_manner=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("action");return"Motor_Specified_Manner('"+b+"', \""+a+'");\n'};Blockly.cake.motor_rate=function(a){return"Motor_Rate('"+a.getFieldValue("PORT")+"')"};Blockly.cake.motor_angle=function(a){return"Motor_Angle('"+a.getFieldValue("PORT")+"')"};Blockly.cake.operator={};Blockly.cake.operator_arithmetic=function(a){var b={operator_add:[" + ",Blockly.cake.ORDER_ADDITIVE],operator_subtract:[" - ",Blockly.cake.ORDER_ADDITIVE],operator_multiply:[" * ",Blockly.cake.ORDER_MULTIPLICATIVE],operator_divide:[" / ",Blockly.cake.ORDER_MULTIPLICATIVE]}[a.type],c=b[0];b=b[1];var d=Blockly.cake.valueToCode(a,"NUM1",b)||"0";a=Blockly.cake.valueToCode(a,"NUM2",b)||"0";return[d+c+a,b]};Blockly.cake.operator_add=Blockly.cake.operator_arithmetic;
Blockly.cake.operator_subtract=Blockly.cake.operator_arithmetic;Blockly.cake.operator_multiply=Blockly.cake.operator_arithmetic;Blockly.cake.operator_divide=Blockly.cake.operator_arithmetic;Blockly.cake.operator_random=function(a){var b=Blockly.cake.valueToCode(a,"FROM",Blockly.cake.ORDER_FUNCTION_CALL)||"0";a=Blockly.cake.valueToCode(a,"TO",Blockly.cake.ORDER_FUNCTION_CALL)||"0";return["random.randint("+b+", "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.operator_compare=function(a){var b=Blockly.cake.ORDER_RELATIONAL,c=Blockly.cake.valueToCode(a,"OPERAND1",b),d=Blockly.cake.valueToCode(a,"OPERAND2",b);parseFloat(c.slice(1,-1))==c.slice(1,-1)?c=parseFloat(c.slice(1,-1)).toString():"''"===c&&(c="0");parseFloat(d.slice(1,-1))==d.slice(1,-1)?d=parseFloat(d.slice(1,-1)).toString():"''"===d&&(d="0");return[c+{operator_gt:" > ",operator_equals:" == ",operator_lt:" < "}[a.type]+d,b]};Blockly.cake.operator_gt=Blockly.cake.operator_compare;
Blockly.cake.operator_equals=Blockly.cake.operator_compare;Blockly.cake.operator_lt=Blockly.cake.operator_compare;Blockly.cake.operator_operation=function(a){var b="operator_and"==a.type?Blockly.cake.ORDER_LOGICAL_AND:Blockly.cake.ORDER_LOGICAL_OR,c=Blockly.cake.valueToCode(a,"OPERAND1",b)||"0",d=Blockly.cake.valueToCode(a,"OPERAND2",b)||"0";return[c+{operator_and:" and ",operator_or:" or "}[a.type]+d,b]};Blockly.cake.operator_and=Blockly.cake.operator_operation;Blockly.cake.operator_or=Blockly.cake.operator_operation;
Blockly.cake.operator_not=function(a){var b=Blockly.cake.ORDER_LOGICAL_NOT;return["not "+(Blockly.cake.valueToCode(a,"OPERAND",b)||"false"),b]};Blockly.cake.operator_join=function(a){var b=Blockly.cake.ORDER_UNARY_PREFIX,c=Blockly.cake.valueToCode(a,"STRING1",b)||"''";a=Blockly.cake.valueToCode(a,"STRING2",b)||"''";return["str("+c+") + str("+a+")",Blockly.cake.ORDER_ADDITIVE]};
Blockly.cake.operator_letter_of=function(a){var b=Blockly.cake.valueToCode(a,"STRING",Blockly.cake.ORDER_UNARY_SIGN)||"''";a=Blockly.cake.valueToCode(a,"LETTER",Blockly.cake.ORDER_MEMBER)||"0";a=parseFloat(a)==a?a-1:a+" - 1";return[b+"["+a+"]",Blockly.cake.ORDER_MEMBER]};Blockly.cake.operator_length=function(a){return["len("+(Blockly.cake.valueToCode(a,"STRING",Blockly.cake.ORDER_FUNCTION_CALL)||"''")+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.operator_contains=function(a){var b=Blockly.cake.ORDER_FUNCTION_CALL,c=Blockly.cake.valueToCode(a,"STRING1",b)||"''";a=Blockly.cake.valueToCode(a,"STRING2",b)||"0";return["str("+c+").find(str("+a+")) > -1",Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.operator_mod=function(a){var b=Blockly.cake.ORDER_MULTIPLICATIVE,c=Blockly.cake.valueToCode(a,"NUM1",b)||"0";a=Blockly.cake.valueToCode(a,"NUM2",b)||"0";return[c+" % "+a,b]};
Blockly.cake.operator_round=function(a){return["round("+(Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_UNARY_POSTFIX)||"0")+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.operator_mathop=function(a){var b=a.getFieldValue("OPERATOR");a=Blockly.cake.valueToCode(a,"NUM",Blockly.cake.ORDER_FUNCTION_CALL)||"0";var c="",d=Blockly.cake.ORDER_FUNCTION_CALL;switch(b){case "abs":c="math.fabs("+a+")";break;case "floor":c="math.floor("+a+")";break;case "ceiling":c="math.ceil("+a+")";break;case "sqrt":c="math.sqrt("+a+")";break;case "sin":c="math.sin("+a+" / 180.0 * math.pi)";break;case "cos":c="math.cos("+a+" / 180.0 * math.pi)";break;case "tan":c="math.tan("+a+" / 180.0 * math.pi)";
break;case "asin":c="math.asin("+a+") / math.pi * 180";d=Blockly.cake.ORDER_MULTIPLICATIVE;break;case "acos":c="math.acosh("+a+") / math.pi * 180";d=Blockly.cake.ORDER_MULTIPLICATIVE;break;case "atan":c="math.atan("+a+") / math.pi * 180";d=Blockly.cake.ORDER_MULTIPLICATIVE;break;case "ln":c="math.log("+a+")";break;case "log":c="math.log("+a+", 10)";break;case "e ^":c="math.exp("+a+")";break;case "10 ^":c="math.pow(10, "+a+")"}return[c,d]};Blockly.cake.procedures={};
Blockly.cake.main_block=function(a){var b=Blockly.cake.statementToCode(a,"STACK");Blockly.cake.STATEMENT_PREFIX&&(b=Blockly.cake.prefixLines(Blockly.cake.STATEMENT_PREFIX.replace(/%1/g,"'"+a.id+"'"),Blockly.cake.INDENT)+b);Blockly.cake.INFINITE_LOOP_TRAP&&(b=Blockly.cake.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+a.id+"'")+b);var c=Blockly.cake.valueToCode(a,"RETURN",Blockly.cake.ORDER_NONE)||"";c=c?"  return "+c+";\n":"  return 0;\n";for(var d=[],e=[],f=[],h=0;h<a.arguments_.length;h++)d[h]=Blockly.cake.variableDB_.getName(a.arguments_[h],
Blockly.Variables.NAME_TYPE),e[h]=a.types_[h],f[h]=e[h]+" "+d[h];d=[];e=[];for(var g in Blockly.cake.times_)h=Blockly.cake.times_[g],g.match("srand")?"main_block"==h[0]&&(h=Blockly.cake.prefixLines(h[1],Blockly.cake.INDENT),d.push(h)):g.match("time")&&"main_block"==h[0]&&(h=Blockly.cake.prefixLines(h[1],Blockly.cake.INDENT),e.push(h));g=d.length?d.join("\n")+"\n"+e.join("\n"):e.join("\n");b="int main("+f.join(", ")+") {"+g.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+b+c+"}";b=Blockly.cake.scrub_(a,
b);Blockly.cake.definitions_.main=b;return null};Blockly.cake.procedures_return=function(a){return(a=a.getFieldValue("VALUE"))?"return "+a+";\n":"return 0;\n"};
Blockly.cake.procedures_defreturn=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=Blockly.cake.statementToCode(a,"STACK");Blockly.cake.STATEMENT_PREFIX&&(c=Blockly.cake.prefixLines(Blockly.cake.STATEMENT_PREFIX.replace(/%1/g,"'"+a.id+"'"),Blockly.cake.INDENT)+c);Blockly.cake.INFINITE_LOOP_TRAP&&(c=Blockly.cake.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+a.id+"'")+c);var d=Blockly.cake.valueToCode(a,"RETURN",Blockly.cake.ORDER_NONE)||"";d=d?"  return "+
d+";\n":"  return 0;\n";var e=Blockly.Procedures.getTypePlusArgs(a),f=[],h=[];for(k in Blockly.cake.times_){var g=Blockly.cake.times_[k];k.match("srand")?g[0]==b&&(g=Blockly.cake.prefixLines(g[1],Blockly.cake.INDENT),f.push(g)):k.match("time")&&g[0]==b&&(g=Blockly.cake.prefixLines(g[1],Blockly.cake.INDENT),h.push(g))}h=f.length?f.join("\n")+"\n"+h.join("\n"):h.join("\n");f=a.getFieldValue("TYPES");var k=a.getFieldValue("DISTS");"pointer"==k?(k=a.getFieldValue("PSPECS"),null==k&&(k="*"),c=f+k+" "+
b+"("+e.join(", ")+") {\n"+h.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+c+d+"}"):"array"==k?(k=a.getFieldValue("ASPECS"),null==k&&(k="[]"),c=f+k+" "+b+"("+e.join(", ")+") {\n"+h.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+c+d+"}"):c=f+" "+b+"("+e.join(", ")+") {\n"+h.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+c+d+"}";c=Blockly.cake.scrub_(a,c);Blockly.cake.definitions_[b]=c;Blockly.cake.definitions_["Func_declare"+b]=f+" "+b+"("+e.join(", ")+");";-1==Blockly.Blocks.checkLegalName(Blockly.Msg.PROCEDURES_ILLEGALNAME,
b)&&this.initName();return null};
Blockly.cake.procedures_defnoreturn=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=Blockly.cake.statementToCode(a,"STACK"),d=[],e=[],f;for(f in Blockly.cake.times_){var h=Blockly.cake.times_[f];f.match("srand")?h[0]==b&&(h=Blockly.cake.prefixLines(h[1],Blockly.cake.INDENT),d.push(h)):f.match("time")&&h[0]==b&&(h=Blockly.cake.prefixLines(h[1],Blockly.cake.INDENT),e.push(h))}e=d.length?d.join("\n")+"\n"+e.join("\n"):e.join("\n");Blockly.cake.STATEMENT_PREFIX&&
(c=Blockly.cake.prefixLines(Blockly.cake.STATEMENT_PREFIX.replace(/%1/g,"'"+a.id+"'"),Blockly.cake.INDENT)+c);Blockly.cake.INFINITE_LOOP_TRAP&&(c=Blockly.cake.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+a.id+"'")+c);(f=Blockly.cake.valueToCode(a,"RETURN",Blockly.cake.ORDER_NONE)||"")&&(f="  return "+f+";\n");d=Blockly.Procedures.getTypePlusArgs(a);c="void "+b+"("+d.join(", ")+") {\n"+e.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n")+c+f+"}";c=Blockly.cake.scrub_(a,c);Blockly.cake.definitions_[b]=c;Blockly.cake.definitions_["Func_declare"+
b]="void "+b+"("+d.join(", ")+");";-1==Blockly.Blocks.checkLegalName(Blockly.Msg.PROCEDURES_ILLEGALNAME,b)&&this.initName();return null};Blockly.cake.procedures_callreturn=function(a){for(var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.cake.valueToCode(a,"ARG"+d,Blockly.cake.ORDER_COMMA)||"null";return[b+"("+c.join(", ")+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.procedures_callnoreturn=function(a){for(var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.cake.valueToCode(a,"ARG"+d,Blockly.cake.ORDER_COMMA)||"null";return b+"("+c.join(", ")+");\n"};
Blockly.cake.procedures_call=function(a){var b=a.getProcCode();b=b.replace(/ /g,"_");b=b.replace(/%n/g,"N");b=b.replace(/%s/g,"S");b=b.replace(/%b/g,"B");Blockly.cake.variableDB_.getName(b,Blockly.Procedures.NAME_TYPE);b=[];for(var c=0;c<a.inputList.length;c++)if(a.inputList[c].type==Blockly.INPUT_VALUE)if(a.inputList[c].connection.targetBlock()){var d=a.inputList[c].connection.targetBlock();d=Blockly.cake.blockToCode(d);b.push(d[0])}else b.push("false")};
Blockly.cake.procedures_definition=function(a){var b=Blockly.cake.statementToCode(a,"custom_block");b=b.slice(2);var c=b+"() {\n";if(a.nextConnection&&a.nextConnection.targetBlock()){var d=[],e;for(e in Blockly.cake.variables_)d.push(Blockly.cake.variables_[e].slice(0,Blockly.cake.variables_[e].indexOf("=")-1));0!==d.length&&(c+=Blockly.cake.INDENT+"global "+d.join(", ")+"\n}");c=Blockly.cake.scrub_(a,c)}else c+=Blockly.cake.INDENT+";\n";Blockly.cake.customFunctions_[b]=c;return null};
Blockly.cake.procedures_prototype=function(a){var b=a.getProcCode();a=a.displayNames_;var c=[];b=b.replace(/ /g,"_");for(var d=0;d<a.length;d++){var e=b.charAt(b.indexOf("%")+1),f=Blockly.cake.variableDB_.getName(a[d],Blockly.Procedures.NAME_TYPE);Blockly.cake.customFunctionsArgName_[a[d]]=f;b="n"===e?b.replace("%n","N"):"s"===e?b.replace("%s","S"):b.replace("%b","B");c.push(f)}b=Blockly.cake.variableDB_.getName(b,Blockly.Procedures.NAME_TYPE);return"void "+b+"("+c.join(", ")+")"};
Blockly.cake.argument_reporter_boolean=function(a){a=a.getFieldValue("VALUE");return[Blockly.cake.customFunctionsArgName_[a],Blockly.cake.ORDER_ATOMIC]};Blockly.cake.argument_reporter_number=function(a){a=a.getFieldValue("VALUE");return[Blockly.cake.customFunctionsArgName_[a],Blockly.cake.ORDER_ATOMIC]};Blockly.cake.argument_reporter_string=function(a){a=a.getFieldValue("VALUE");return[Blockly.cake.customFunctionsArgName_[a],Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing={};Blockly.cake.sensing_color_judgment=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("COLOR");return['Sensing_color_judgment("'+b+'", '+a+")",Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_color_detection=function(a){return['Sensing_color_detection("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.sensing_color_detectionRGB=function(a){var b=a.getFieldValue("PORT");switch(a.getFieldValue("color")){case "red":var c="0xFF0000";break;case "green":c="0x00FF00";break;case "blue":c="0x0000FF"}return['Sensing_color_detectionRGB("'+b+'", '+c.replace(/'/g,"")+")",Blockly.cake.ORDER_RELATIONAL]};
Blockly.cake.sensing_reflected_light_judgment=function(a){var b=a.getFieldValue("PORT"),c=a.getFieldValue("judgment");a=a.getFieldValue("value");return['Sensing_Reflected_light_judgment("'+b+'","'+c+'", '+a+")",Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_reflected_light_detection=function(a){return['Sensing_reflected_light_detection("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.sensing_line_inspection_judgment=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("line");return['Sensing_Line_inspection_judgment("'+b+'", "'+a+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_ultrasonic_judgment=function(a){var b=a.getFieldValue("PORT"),c=a.getFieldValue("judgment");a=a.getFieldValue("value");return['Sensing_Line_inspection_judgment("'+b+'", "'+c+'", '+a+")",Blockly.cake.ORDER_RELATIONAL]};
Blockly.cake.sensing_ultrasonic_detection=function(a){return['Sensing_ultrasonic_detection("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_sound_intensity=function(a){return["Sensing_sound_intensity()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing_key_judgment=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("status");return['Sensing_key_judgment("'+b+'", "'+a+'")',Blockly.cake.ORDER_RELATIONAL]};
Blockly.cake.sensing_key_press=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("status");return['Sensing_key_press("'+b+'", "'+a+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_gyroscope_acceleration=function(a){return['Sensing_gyroscope_acceleration("'+a.getFieldValue("directiion")+'")',Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing_gyroscope_attitude=function(a){return['Sensing_gyroscope_attitude("'+a.getFieldValue("attitude")+'")',Blockly.cake.ORDER_RELATIONAL]};
Blockly.cake.sensing_gyroscope_angle=function(a){return['Sensing_gyroscope_angle("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_magnetic_calibration=function(a){return"Sensing_magnetic_calibration();\n"};Blockly.cake.sensing_magnetism=function(a){return['Sensing_magnetism("'+a.getFieldValue("direction")+'")',Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing_compass=function(a){return["Sensing_compass()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.sensing_read_pin=function(a){return['Sensing_read_pin("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_write_pin=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("pin");return['Sensing_write_pin("'+b+'", '+a+")",Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_write_analog=function(a){var b=a.getFieldValue("PORT");a=a.getFieldValue("pin");return['Sensing_write_analog("'+b+'", '+a+")",Blockly.cake.ORDER_RELATIONAL]};
Blockly.cake.sensing_read_analog=function(a){return['Sensing_read_analog("'+a.getFieldValue("PORT")+'")',Blockly.cake.ORDER_RELATIONAL]};Blockly.cake.sensing_timer=function(a){return["Sensing_timer()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing_reset_timer=function(a){return"Sensing_reset_timer();\n"};Blockly.cake.sensing_dayssince2000=function(a){return["Sensing_dayssince()",Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.sensing_current=function(a){return['Sensing_current("'+a.getFieldValue("CURRENTMENU")+'")',Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sensing_loudness=function(a){return["Sensing_loudness()",Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sound={};Blockly.cake.sound_sounds_menu=function(a){return[a.getFieldValue("SOUND_MENU"),Blockly.cake.ORDER_ATOMIC]};Blockly.cake.sound_playuntildone=function(a){return'sound_playuntildone("'+Blockly.cake.valueToCode(a,"SOUND_MENU",Blockly.cake.ORDER_ATOMIC)+'");\n'};Blockly.cake.sound_play=function(a){return'sound_play("'+Blockly.cake.valueToCode(a,"SOUND_MENU",Blockly.cake.ORDER_ATOMIC)+'");\n'};Blockly.cake.sound_stopallsounds=function(a){return"sound_stopallsounds();\n"};
Blockly.cake.sound_seteffectto=function(a){var b=a.getFieldValue("EFFECT");a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ATOMIC);return'sound_seteffectto("'+b+'", '+a+");\n"};Blockly.cake.sound_changeeffectby=function(a){var b=a.getFieldValue("EFFECT");a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ATOMIC);return'sound_changeeffectby("'+b+'", '+a+");\n"};Blockly.cake.sound_cleareffects=function(a){return"sound_cleareffects();\n"};
Blockly.cake.sound_changevolumeby=function(a){return"sound_changevolumeby("+Blockly.cake.valueToCode(a,"VOLUME",Blockly.cake.ORDER_ATOMIC)+");\n"};Blockly.cake.sound_setvolumeto=function(a){return"sound_setvolumeto("+Blockly.cake.valueToCode(a,"VOLUME",Blockly.cake.ORDER_ATOMIC)+");\n"};Blockly.cake.stdio={};
Blockly.cake.library_stdio_printf=function(a){for(var b,c,d="",e="",f=0;f<=a.printAddCount_;f++){b=Blockly.cake.valueToCode(a,"VAR"+f,Blockly.cake.ORDER_NONE)||"";c=a.inputList[f].connection;var h=c.targetBlock();if(h){var g=h.type;"math_arithmetic"==g||"math_modulo"==g||"library_math_abs"==g||"library_math_trig"==g||"library_math_logs"==g||"library_math_pow"==g||"library_math_exp"==g||"library_math_sqrt"==g||"library_math_round"==g||"library_string_strlen"==g||"library_stdlib_rand"==g||"library_stdlib_number_forRandScope1"==
g||"library_stdlib_number_forRandScope100"==g||"library_stdlib_sizeof_forMalloc"==g||"library_stdlib_arithmetic_forMalloc"==g||"library_stdlib_number_forMalloc"==g?(d+="%d",e+=", "+b):"library_string_strcat"==g||"library_string_strcpy"==g||"library_string_strcmp"==g?(d+="%s",e+=", "+b):"library_stdlib_convert"==g?(-1!=b.indexOf("atoi(")?d+="%d":-1!=b.indexOf("atof(")&&(d+="%f"),e+=", "+b):"variables_array_get"==g?(c=b.split("["),c=Blockly.cake.varTypeCheckInPrintScan(c[0]),""==c?d+=b:(d+=c,e+=", "+
b)):"variables_pointer_get"==g?(d+="%p",e+=", "+b):"variables_pointer_&"==g?h.inputList[0].connection.targetBlock()&&(b=Blockly.cake.valueToCode(h,"VALUE",Blockly.cake.ORDER_NONE)||"",d+="%p",e+=", &"+b):"variables_pointer_*"==g?h.inputList[0].connection.targetBlock()&&(b=Blockly.cake.valueToCode(h,"VALUE",Blockly.cake.ORDER_NONE)||"",0<=b.indexOf("*")&&h.inputList[0].connection.targetBlock().inputList[0].connection.targetBlock()?(b=Blockly.cake.valueToCode(h.inputList[0].connection.targetBlock(),
"VALUE",Blockly.cake.ORDER_NONE)||"",c=Blockly.cake.pointerTypeCheckInPrint(b,!0),""==c?d+=b:(d+=c,e+=", **"+b)):(c=Blockly.cake.pointerTypeCheckInPrint(b,!1),""==c?d+=b:(d+=c,e+=", *"+b))):"library_math_numcheck"==g||"library_math_numcompare"==g||"procedures_callreturn"==g||"logic_compare"==g||"logic_operation"==g||"logic_negate"==g||"logic_boolean"==g||"logic_null"==g||"logic_ternary"==g||"controls_switch"==g||"library_stdlib_rand_scope"==g||"library_stdlib_malloc"==g?(c.isSuperior()?c.targetBlock().setParent(null):
c.sourceBlock_.setParent(null),c.sourceBlock_.bumpNeighbours_()):(c=Blockly.cake.varTypeCheckInPrintScan(b),""==c?d+=b:(d+=c,e+=", "+b))}}Blockly.cake.definitions_.include_cake_stdio="#include <stdio.h>";return(""==e?'printf("'+d+'");':'printf("'+d+'"'+e+");")+"\n"};
Blockly.cake.library_stdio_text=function(a){var b=Blockly.cake.quote_(a.getFieldValue("TEXT"));if(!a.getParent()||"library_stdio_printf"!=a.getParent().type&&"define_declare"!=a.getParent().type&&"comment"!=a.getParent().type)b=1==b.length?"'"+b+"'":'"'+b+'"';return[b,Blockly.cake.ORDER_ATOMIC]};Blockly.cake.library_stdio_newLine=function(){return["\\n",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_stdio_scanf=function(a){for(var b,c,d="",e="",f=0;f<=a.scanAddCount_;f++){b=Blockly.cake.valueToCode(a,"VAR"+f,Blockly.cake.ORDER_NONE)||"";c=a.inputList[f].connection;var h=c.targetBlock();if(h){var g=h.type;"variables_array_get"==g?(h=b.split("["),c=Blockly.cake.arrTypeCheckInScan(h[0],c),"%s"==c?(d+=c,e+=", "+b):(d+=c,e+=", &"+b)):"variables_pointer_get"==g?(c=Blockly.cake.varTypeCheckInPrintScan(b),"%c"==c&&(c="%s"),d+=c,e+=", "+b):"variables_pointer_&"==g?(c.isSuperior()?
c.targetBlock().setParent(null):c.sourceBlock_.setParent(null),c.sourceBlock_.bumpNeighbours_()):"variables_pointer_*"==g?h.inputList[0].connection.targetBlock()&&(b=Blockly.cake.valueToCode(h,"VALUE",Blockly.cake.ORDER_NONE)||"",c=Blockly.cake.varTypeCheckInPrintScan(b),""==c?d+=b:(d+=c,e+=", &*"+b)):(c=Blockly.cake.varTypeCheckInPrintScan(b),d+=c,e+=", &"+b)}}Blockly.cake.definitions_.include_cake_stdio="#include <stdio.h>";return(""==e?'scanf("'+d+'");':'scanf("'+d+'"'+e+");")+"\n"};
Blockly.cake.varTypeCheckInPrintScan=function(a){for(var b="",c=Blockly.Variables.allVariables(),d=0;d<c.length;d++)if(a==c[d][2]){a=c[d][0];"int"==a?b="%d":"unsigned int"==a?b="%u":"float"==a?b="%f":"double"==a?b="%f":"char"==a?b="%c":"dbchar"==a&&(b="%s");break}return b};
Blockly.cake.pointerTypeCheckInPrint=function(a,b){var c="",d=Blockly.Variables.allVariables();if(1==b){for(b=0;b<d.length;b++)if(a==d[b][2]){a=d[b][0];"dbint"==a?c="%d":"dbunsigned int"==a?c="%u":"dbfloat"==a?c="%f":"dbdouble"==a?c="%f":"dbchar"==a&&(c="%c");break}return c}for(b=0;b<d.length;b++)if(a==d[b][2])return a=d[b][0],"*"==d[b][5]?"int"==a?c="%d":"unsigned int"==a?c="%u":"float"==a?c="%f":"double"==a?c="%f":"char"==a&&(c="%c"):c="dbchar"==a?"%s":"%p",c};
Blockly.cake.arrTypeCheckInScan=function(a,b){a="";for(var c=b.targetBlock(),d=Blockly.Blocks.getWantedBlockArray("a"),e=0;e<d.length;e++){var f=Blockly.FieldDropdown.prototype.getTypefromVars(d[e][2],0),h=d[e][5][0],g=c.getInputIdxLength();if(h==g){"int"==f?a="%d":"unsigned int"==f?a="%u":"float"==f?a="%f":"double"==f?a="%f":"char"==f?a="%c":"dbchar"==f&&(a="%s");break}else if(h>g&&"char"==d[e][0]){a="%s";break}else b.isSuperior()?b.targetBlock().setParent(null):b.sourceBlock_.setParent(null),b.sourceBlock_.bumpNeighbours_()}return a};
Blockly.cake.comment=function(a){for(var b="",c="",d=0,e=0;e<=a.commentAddCount_;e++){b=Blockly.cake.valueToCode(a,"VAR"+e,Blockly.cake.ORDER_NONE)||"";var f=a.inputList[e].connection,h=f.targetBlock();h&&"library_stdio_text"!=h.type&&(f.isSuperior()?f.targetBlock().setParent(null):f.sourceBlock_.setParent(null),f.sourceBlock_.bumpNeighbours_());""!=b&&(c+=b+"\n");d+=1}return 1==d?""!=b?"//"+c:"//\n":"/*\n"+c+"*/\n"};Blockly.cake.stdlib={};Blockly.cake.library_stdlib_convert=function(a){var b=a.getFieldValue("OPERATORS");a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";switch(b){case "INT":b="atoi("+a+")";break;case "DOUBLE":b="atof("+a+")";break;default:throw"Unknown math operator: "+b;}Blockly.cake.definitions_.include_cake_stdlib="#include <stdlib.h>";return[b,Blockly.cake.ORDER_NONE]};
Blockly.cake.library_stdlib_rand=function(a){var b=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"";Blockly.cake.definitions_.include_cake_stdlib="#include <stdlib.h>";Blockly.cake.definitions_.include_cake_time="#include <time.h>";b="rand()"+b;Blockly.cake.getUpperLine(a);return[b,Blockly.cake.ORDER_NONE]};Blockly.cake.getUpperLine=function(a){a=a.getScope();Blockly.cake.times_.cake_time_srand=[a,"srand(time(NULL));"]};
Blockly.cake.library_stdlib_rand_scope=function(a){var b=Blockly.cake.valueToCode(a,"A",Blockly.cake.ORDER_NONE)||"0";a=Blockly.cake.valueToCode(a,"B",Blockly.cake.ORDER_NONE)||"0";return[1==b?" % "+a+" + "+b:" % ("+a+"-"+b+"+1) + "+b,Blockly.cake.ORDER_NONE]};Blockly.cake.library_stdlib_number_forRandScope1=function(a){return[parseFloat(a.getFieldValue("NUM")),Blockly.cake.ORDER_ATOMIC]};Blockly.cake.library_stdlib_number_forRandScope100=function(a){return[parseFloat(a.getFieldValue("NUM")),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.library_stdlib_malloc=function(a){var b=Blockly.FieldDropdown.prototype.getParentType(a,"variables_pointer");a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_stdlib="#include <stdlib.h>";return["("+b+" *)malloc("+a+")",Blockly.cake.ORDER_NONE]};Blockly.cake.library_stdlib_sizeof_forMalloc=function(a){return["sizeof("+(Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''")+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_stdlib_arithmetic_forMalloc=function(a){var b=Blockly.cake.valueToCode(a,"A",Blockly.cake.ORDER_NONE)||"0";a=Blockly.cake.valueToCode(a,"B",Blockly.cake.ORDER_NONE)||"0";return[b+" * "+a,Blockly.cake.ORDER_NONE]};Blockly.cake.library_stdlib_number_forMalloc=function(a){return[parseFloat(a.getFieldValue("NUM")),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.library_stdlib_free=function(a){a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||"''";Blockly.cake.definitions_.include_cake_stdlib="#include <stdlib.h>";return"free("+a+");\n"};Blockly.cake.library_stdlib_exit=function(a){a=a.getFieldValue("OPERATORS");switch(a){case "SUCCESS":a="exit(0);\n";break;case "FAILURE":a="exit(1);\n";break;default:throw"Unknown math operator: "+a;}Blockly.cake.definitions_.include_cake_stdlib="#include <stdlib.h>";return a};Blockly.cake.string={};Blockly.cake.library_string_strlen=function(a){a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_NONE)||'""';Blockly.cake.definitions_.include_cake_string="#include <string.h>";return["strlen("+a+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_string_strcat=function(a){var b=Blockly.cake.valueToCode(a,"STR1",Blockly.cake.ORDER_NONE)||'""';a=Blockly.cake.valueToCode(a,"STR2",Blockly.cake.ORDER_NONE)||'""';Blockly.cake.definitions_.include_cake_string="#include <string.h>";return["strcat("+b+", "+a+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_string_strcpy=function(a){var b=Blockly.cake.valueToCode(a,"STR1",Blockly.cake.ORDER_NONE)||'""';a=Blockly.cake.valueToCode(a,"STR2",Blockly.cake.ORDER_NONE)||'""';Blockly.cake.definitions_.include_cake_string="#include <string.h>";return["strcpy("+a+", "+b+")",Blockly.cake.ORDER_NONE]};
Blockly.cake.library_string_strcmp=function(a){var b=Blockly.cake.valueToCode(a,"STR1",Blockly.cake.ORDER_NONE)||'""';a=Blockly.cake.valueToCode(a,"STR2",Blockly.cake.ORDER_NONE)||'""';Blockly.cake.definitions_.include_cake_string="#include <string.h>";return["strcmp("+b+", "+a+")",Blockly.cake.ORDER_NONE]};Blockly.cake.structure={};
Blockly.cake.structure_define=function(a){for(var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),null),c=[],d=[],e=[],f=[],h=[],g=0;g<a.members_.length;g++)c[g]=Blockly.cake.variableDB_.getName(a.members_[g],Blockly.Variables.NAME_TYPE),d[g]=a.types_[g],e[g]=a.dist_[g],f[g]=a.spec_[g],"v"==e[g]?h[g]=d[g]+" "+c[g]+";\n":"a"==e[g]?h[g]=d[g]+" "+c[g]+"["+f[g]+"];\n":"p"==e[g]&&(h[g]=d[g]+f[g]+" "+c[g]+";\n");a="typedef struct\n{\n"+h.join("")+"} "+b+";\n";-1==Blockly.Blocks.checkLegalName(Blockly.Msg.STRUCTURE_ILLEGALNAME,b)&&
this.initName();return a};Blockly.cake.structure_declare=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("TYPES"),null);b=Blockly.Blocks.checkUnselect(b);a=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Variables.NAME_TYPE);-1==Blockly.Blocks.checkLegalName(Blockly.Msg.STRUCTURE_ILLEGALNAME,a)&&this.initName();return b+" "+a+";\n"};
Blockly.cake.structure_get=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("NAME"),null);a=Blockly.cake.variableDB_.getName(a.getFieldValue("Mem"),Blockly.Variables.NAME_TYPE);a=Blockly.Blocks.checkUnselect(a);return["Itself"==a?b:b+"."+a,Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.structure_set=function(a){var b=a.getFieldValue("NAME"),c=Blockly.cake.variableDB_.getName(a.getFieldValue("Mem"),Blockly.Variables.NAME_TYPE);c=Blockly.Blocks.checkUnselect(c);a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0";return("Itself"==c?b:b+"."+c)+" = "+a+";\n"};Blockly.cake.text={};Blockly.cake.text=function(a){return[Blockly.cake.quote_(a.getFieldValue("TEXT")),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.text_join=function(a){if(0==a.itemCount_)return["''",Blockly.cake.ORDER_ATOMIC];if(1==a.itemCount_){var b=Blockly.cake.valueToCode(a,"ADD0",Blockly.cake.ORDER_NONE)||"''";return["String("+b+")",Blockly.cake.ORDER_FUNCTION_CALL]}if(2==a.itemCount_)return b=Blockly.cake.valueToCode(a,"ADD0",Blockly.cake.ORDER_NONE)||"''",a=Blockly.cake.valueToCode(a,"ADD1",Blockly.cake.ORDER_NONE)||"''",["String("+b+") + String("+a+")",Blockly.cake.ORDER_ADDITION];b=Array(a.itemCount_);for(var c=0;c<a.itemCount_;c++)b[c]=
Blockly.cake.valueToCode(a,"ADD"+c,Blockly.cake.ORDER_COMMA)||"''";b="["+b.join(",")+"].join('')";return[b,Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.text_append=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_NONE)||"''";return b+" = String("+b+") + String("+a+");\n"};
Blockly.cake.text_length=function(a){return[(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_FUNCTION_CALL)||"''")+".length",Blockly.cake.ORDER_MEMBER]};Blockly.cake.text_isEmpty=function(a){return["!"+(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"''"),Blockly.cake.ORDER_LOGICAL_NOT]};
Blockly.cake.text_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.cake.valueToCode(a,"FIND",Blockly.cake.ORDER_NONE)||"''";return[(Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"''")+"."+b+"("+c+") + 1",Blockly.cake.ORDER_MEMBER]};
Blockly.cake.text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c=Blockly.cake.valueToCode(a,"AT",Blockly.cake.ORDER_UNARY_NEGATION)||"1";a=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_MEMBER)||"''";switch(b){case "FIRST":return[a+".charAt(0)",Blockly.cake.ORDER_FUNCTION_CALL];case "LAST":return[a+".slice(-1)",Blockly.cake.ORDER_FUNCTION_CALL];case "FROM_START":return c=Blockly.isNumber(c)?parseFloat(c)-1:c+" - 1",[a+".charAt("+c+")",Blockly.cake.ORDER_FUNCTION_CALL];case "FROM_END":return[a+
".slice(-"+c+").charAt(0)",Blockly.cake.ORDER_FUNCTION_CALL];case "RANDOM":return[Blockly.cake.provideFunction_("text_random_letter",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+a+")",Blockly.cake.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};
Blockly.cake.text_getSubstring=function(a){var b=Blockly.cake.valueToCode(a,"STRING",Blockly.cake.ORDER_MEMBER)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=Blockly.cake.valueToCode(a,"AT1",Blockly.cake.ORDER_NONE)||"1";a=Blockly.cake.valueToCode(a,"AT2",Blockly.cake.ORDER_NONE)||"1";return["FIRST"==c&&"LAST"==d?b:Blockly.cake.provideFunction_("text_get_substring",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(text, where1, at1, where2, at2) {","  function getAt(where, at) {",
"    if (where == 'FROM_START') {","      at--;","    } else if (where == 'FROM_END') {","      at = text.length - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = text.length - 1;","    } else {","      throw 'Unhandled option (text_getSubstring).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return text.slice(at1, at2);","}"])+"("+b+", '"+c+"', "+e+", '"+d+"', "+a+")",Blockly.cake.ORDER_FUNCTION_CALL]};
Blockly.cake.text_changeCase=function(a){var b={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")];b?(a=Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_MEMBER)||"''",a+=b):(b=Blockly.cake.provideFunction_("text_toTitleCase",["function "+Blockly.cake.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"]),a=Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_NONE)||
"''",a=b+"("+a+")");return[a,Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.text_trim=function(a){var b={LEFT:".trimLeft()",RIGHT:".trimRight()",BOTH:".trim()"}[a.getFieldValue("MODE")];return[(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_MEMBER)||"''")+b,Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.text_print=function(a){return"window.alert("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_NONE)||"''")+");\n"};
Blockly.cake.text_prompt=function(a){var b="window.prompt("+Blockly.cake.quote_(a.getFieldValue("TEXT"))+")";"NUMBER"==a.getFieldValue("TYPE")&&(b="parseFloat("+b+")");return[b,Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.text_prompt_ext=function(a){var b="window.prompt("+(Blockly.cake.valueToCode(a,"TEXT",Blockly.cake.ORDER_NONE)||"''")+")";"NUMBER"==a.getFieldValue("TYPE")&&(b="parseFloat("+b+")");return[b,Blockly.cake.ORDER_FUNCTION_CALL]};Blockly.cake.time={};Blockly.cake.library_time_current=function(a){a=a.getScope();Blockly.cake.times_.time_currentTime=[a,"struct tm *t;\ntime_t timer;"];Blockly.cake.definitions_.include_cake_time="#include <time.h>";return'timer = time(NULL);\nt = localtime(&timer);\nprintf("%04d-%02d-%02d %02d:%02d:%02d\\n",t->tm_year + 1900, t->tm_mon + 1, t->tm_mday, t->tm_hour, t->tm_min, t->tm_sec);\n'};
Blockly.cake.library_time_requiredTime=function(a){var b=Blockly.cake.valueToCode(a,"SAVE",Blockly.cake.ORDER_NONE)||"",c=Blockly.cake.statementToCode(a,"DO");a=a.getScope();Blockly.cake.times_.time_requiredTime=[a,"time_t start, end;"];Blockly.cake.definitions_.include_cake_time="#include <time.h>";return"start = time(NULL);\n"+c+"end = time(NULL);\n"+b+" = difftime(end, start);\n"};Blockly.cake.variables={};Blockly.cake.define_get=function(a){a=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.Blocks.checkUnselect(a);return[a,Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.define_declare=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0",c=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);-1==Blockly.Blocks.checkLegalName(Blockly.Msg.VARIABLES_ILLEGALNAME,c)&&this.initVar();a=Blockly.cake.scrub_(a,"#define "+c+" "+b);Blockly.cake.definitions_["define_"+c]=a;return null};
Blockly.cake.variables_get=function(a){a=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.Blocks.checkUnselect(a);return[a,Blockly.cake.ORDER_ATOMIC]};Blockly.cake.variables_set=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0";a=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.Blocks.checkUnselect(a);return a+" = "+b+";\n"};
Blockly.cake.variables_declare=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0",c=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=a.getFieldValue("TYPES");-1==Blockly.Blocks.checkLegalName(Blockly.Msg.VARIABLES_ILLEGALNAME,c)&&this.initVar();return a+" "+c+" = "+b+";\n"};
Blockly.cake.variables_pointer_get=function(a){a=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.Blocks.checkUnselect(a);return[a,Blockly.cake.ORDER_ATOMIC]};Blockly.cake.variables_pointer_set=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0";a=Blockly.cake.valueToCode(a,"VAR",Blockly.cake.ORDER_ASSIGNMENT);a=Blockly.Blocks.checkUnselect(a);return a+" = "+b+";\n"};
Blockly.cake.variables_pointer_declare=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0",c=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),d=a.getFieldValue("TYPES");if("*"==a.getFieldValue("ITERATION")||"**"==a.getFieldValue("ITERATION")||"***"==a.getFieldValue("ITERATION"))a=a.getFieldValue("ITERATION");else return window.alert("please confirm asterisk. that must be among *, **, and  ***."),0;-1==Blockly.Blocks.checkLegalName(Blockly.Msg.VARIABLES_ILLEGALNAME,
c)&&this.initVar();return d+a+" "+c+" = "+b+";\n"};Blockly.cake["variables_pointer_&"]=function(a){return["&"+Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT),Blockly.cake.ORDER_ATOMIC]};Blockly.cake["variables_pointer_*"]=function(a){return["*"+Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT),Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.variables_array_get=function(a){var b=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);b=Blockly.Blocks.checkUnselect(b);var c=a.getFieldValue("LENGTH_1"),d=a.getFieldValue("LENGTH_2"),e=a.getFieldValue("LENGTH_3");0==isNaN(c)&&(c=""==c?-1:1*c);0==isNaN(d)&&(d=""==d?-1:1*d);0==isNaN(e)&&(e=""==e?-1:1*e);var f=Blockly.Blocks.getWantedBlockArray("a"),h=Blockly.Blocks.getIndexArray(f,b);f=Blockly.Blocks.checkArrayIndex(c,h[0]);var g=Blockly.Blocks.checkArrayIndex(d,
h[1]);h=Blockly.Blocks.checkArrayIndex(e,h[2]);if(0==f&&-1!=c||0==g&&-1!=d||0==h&&-1!=e)window.alert("\uc778\ub371\uc2a4 \ucd08\uacfc"),a.initIdx(f,g,h);else if(1==f&&0==g&&0==h)var k=b+"["+c+"]";else 1==f&&1==g&&0==h?k=b+"["+c+"]["+d+"]":1==f&&1==g&&1==h?k=b+"["+c+"]["+d+"]["+e+"]":0==f&&0==g&&0==h?(a=this.getFieldValue("VAR"),a=Blockly.FieldVariableArray.getBlockIdxLength(a),k=1==a?b+"[]":2==a?b+"[][]":b+"[][][]"):a.initIdx(f,g,h);return[k,Blockly.cake.ORDER_ATOMIC]};
Blockly.cake.variables_array_set=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0",c=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);c=Blockly.Blocks.checkUnselect(c);var d=a.getFieldValue("LENGTH_1"),e=a.getFieldValue("LENGTH_2"),f=a.getFieldValue("LENGTH_3");d=""==d?-1:1*d;e=""==e?-1:1*e;f=""==f?-1:1*f;var h=Blockly.Blocks.getWantedBlockArray("a"),g=Blockly.Blocks.getIndexArray(h,c),k;h=Blockly.Blocks.checkArrayIndex(d,
g[0]);var l=Blockly.Blocks.checkArrayIndex(e,g[1]);g=Blockly.Blocks.checkArrayIndex(f,g[2]);0==h&&-1!=d||0==l&&-1!=e||0==g&&-1!=f?(window.alert("\uc778\ub371\uc2a4 \ucd08\uacfc"),a.initIdx(h,l,g)):1==h&&0==l?k=c+"["+d+"] = "+b+";\n":1==h&&1==l&&0==g?k=c+"["+d+"]["+e+"] = "+b+";\n":1==h&&1==l&&1==g?k=c+"["+d+"]["+e+"]["+f+"] = "+b+";\n":a.initIdx(h,l,g);return k};
Blockly.cake.variables_array_declare=function(a){var b=Blockly.cake.valueToCode(a,"VALUE",Blockly.cake.ORDER_ASSIGNMENT)||"0",c=Blockly.cake.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),d=a.getFieldValue("TYPES"),e=a.getFieldValue("LENGTH_1"),f=a.getFieldValue("LENGTH_2");a=a.getFieldValue("LENGTH_3");var h;0!=e&&0==f&&0==a?h=d+" "+c+"["+e+"] = {"+b+"};\n":0!=e&&0!=f&&0==a?h=d+" "+c+"["+e+"]["+f+"]  = {"+b+"};\n":0!=e&&0!=f&&0!=a&&(h=d+" "+c+"["+e+"]["+f+"]["+a+"] = {"+
b+"};\n");-1==Blockly.Blocks.checkLegalName(Blockly.Msg.VARIABLES_ILLEGALNAME,c)&&this.initVar();return h};
